

<h4>Edit your recipe:</h4>

<div class="container">
    <form method="post" action="/recipes/<%= @recipe.id %>">
        <input id="hidden" type="hidden" name="_method" value="patch">
         <label for="recipe_name"> Recipe Name: </label>
        <input type="text" name="recipe[name]" id="recipe_name" value="<%= @recipe.name %>">
        <label for="recipe_author"> Chef: </label>
        <input type="text" name="recipe[author]" id="recipe_author" value="<%= @recipe.author %>">
        <label for="recipe_cuisine"> Cuisine: </label>
        <input type="text" name="recipe[cuisine]" id="recipe_cuisine" value="<%= @recipe.cuisine %>">
        <label for="recipe_serves"> Serves: </label>
        <input type="text" name="recipe[serves]" id="recipe_serves" value="<%= @recipe.serves %>">
        <h6>Meal: </h6>
        <% MEALS.each do |meal| %>
            <p>
            <label>
                <input type="checkbox" name="[meals][]" id="meal_<%= MEALS.index(meal) %>" value="<%= meal %>" <%= "checked" if @recipe.meals.pluck(:name).include?(meal) %>>
                <span><%= meal %></span>
            </label>
            </p>
        <% end %>
          
        <label for="recipe_cook_time"> Cooking/Prep Time: </label>
        <input type="text" name="recipe[cook_time]" id="recipe_cook_time" value="<%= @recipe.cook_time %>">

        <h6>Ingredients: </h6><br>
        <div class="row">
            <label for="quants" class="col s3">Quantity: </label>
            <label for="ings" class="col s9">Ingredient: </label>
        </div>
        <div class="row">
                <% @ingredients.each do |ing| %>
                    <div class="col s3">
                        <input type="text" name="quants[]" id="quants" value="<%= RecipeIngredient.find_by(recipe_id: @recipe.id, ingredient_id: ing.id).quantity %>">
                    </div>
                    <div class="col s9">
                         <input type="text" name="ings[]" id="ings" value="<%= ing.name %>">
                    </div>
                <% end %>
                <% 10.times do %>
                    <div class="col s3">
                        <input type="text" name="quants[]" id="quants">
                    </div>
                    <div class="col s9">
                         <input type="text" name="ings[]" id="ings">
                    </div>
                <% end %>              
        </div>
        <br><br>
        <div class ="row">
            <div class="col s12">
                <h6>Steps: </h6><br>
                <% i = 1 %>
                <% @recipe.instructions.pluck("content").each do |inst| %>
                    <%= "#{i}. " %><input type="text" name="steps[]" id="step" value="<%= inst %>">
                    <% i += 1 %>
                <% end %>
                <% 5.times do %>
                    <%= "#{i}. " %><input type="text" name="steps[]" id="step">
                    <% i += 1 %>
                <% end %>
            </div>
        </div>
        <input class="btn" type="submit" value="Save">
    </form>
</div>
        
    